<html><head>
<script>
function init() {
	var fontName = document.getElementById('font_name');
	var fontNameInput = document.getElementById('font_name_input');
	var fontSize = document.getElementById('font_size');
	var fontSizeInput = document.getElementById('font_size_input');
	var mark_text = document.getElementById('mark_text');
	var mark_box = document.getElementById('mark_box');
	var save_button = document.getElementById('save');

    
	chrome.extension.sendRequest
	(
		{
			text:"getFontinfo"
		},
		function(res)
		{
			fontName.innerText = res.font;
			fontSize.innerText = res.size;
			if(res.mark === "true") mark_box.checked = true;
			if(res.mark === "false") mark_box.checked = false;
            var msg = (window.navigator.language === "ja") ? "対応する括弧を強調表示する": "Highlight matching brackets";
            console.log(msg);
            mark_text.innerText = msg;
		}
	);
	fontName.addEventListener('click', function()
	{
		fontName.style.display = "none";
		fontNameInput.type = "text";
		fontNameInput.focus();
		fontNameInput.value = fontName.innerText;
		
		fontNameInput.addEventListener('blur', function(){
			fontName.innerText = fontNameInput.value;
			fontNameInput.type = "hidden";
			fontName.style.display = "inline";
			
		}, false);
	}, false);
	fontSize.addEventListener('click', function()
	{
		fontSize.style.display = "none";
		fontSizeInput.type = "text";
		fontSizeInput.focus();
		fontSizeInput.value = fontSize.innerText;
		
		fontSizeInput.addEventListener('blur', function(){
			fontSize.innerText = fontSizeInput.value;
			fontSizeInput.type = "hidden";
			fontSize.style.display = "inline";
			
		}, false);
	}, false);
	save_button.addEventListener('click', function()
	{
		chrome.extension.sendRequest(
		{
			text: "setFontinfo",
			font: fontName.innerText,
			size: fontSize.innerText,
			mark: mark_box.checked
		});
	});
	function check()
	{
		if(mark_box.checked === true) {
			mark_box.checked = false;
		}else{
			mark_box.checked = true;
		}
	}
	mark_text.addEventListener('click', check, false);
}
window.addEventListener('load', init, false);
</script>
<style>
body {
width:200px;
font-family: sans-serif;
font-size: 90%;
color: #444;
}
a, a:visited {
  color: #333;
}
.h {
font-weight: bold;
}
ul {
  padding: 4px 4px 4px 4px;
  margin: 2px 2px 2px 2px;
  list-style: none;
}
li {
 margin: 0 0 0 0;
}
#font_name_input, #font_size_input{
 width:140px;
 margin:0px;
}
input#save {
 width:200px;
}
</style>
</head><body>
<div id="popup">
<span class="h">mbedEditor++</span><br>
<ul>
<li>Font: <span id="font_name"></span><input type="hidden"class="textbox"id="font_name_input"></li>
<li>Size: <span id="font_size"></span><input type="hidden"class="textbox"id="font_size_input"></li>
<li><input type="checkbox" id="mark_box"><span id="mark_text"></span>
</ul>
<input type="button"value="Save"id="save">
</div>
</body></html>
